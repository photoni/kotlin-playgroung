package org.photoni.math.analysis

import org.junit.Test

class IndicatorsTest {


    @Test
    fun sma() {
        val n=5
        val arr = doubleArrayOf(11.0,12.0,13.0,14.0,15.0,16.0,17.0)
        var sma = Indicators.sma(n, arr)
        println("result ${sma.contentToString()}")
    }

    @Test
    fun ema() {
        val n=10
        val arr = doubleArrayOf(22.27,22.19,22.08,22.17,22.18,22.13,22.23,22.43,22.24,22.29,22.15,22.39,22.38,22.61,23.36,24.05,23.75,23.83,23.95,23.63,23.82,23.87,23.65,23.19,23.10,23.33,22.68,23.10,22.40,22.17)
        var emas = Indicators.ema(n, arr)
        println("result ${emas.contentToString()}")

    }

    @Test
    fun macd() {

        val arr = doubleArrayOf(29.87,30.24,30.1,28.9,28.92,28.48,28.56,27.56,28.47,28.28,27.49,27.23,26.35,26.33,27.03,26.22,26.01,25.46,27.03,27.45,28.36,28.43,27.95,29.01,29.38,29.36,28.91,30.61,30.05,30.19,31.12,30.54,29.78,30.04,30.49,31.47,32.05,31.97,31.13,31.66,32.64,32.59,32.19,32.1,32.93,33.0,31.94,32.39,32.49,32.8,33.38,33.42,33.17,33.63,33.96,34.05,34.73,34.7,34.71,33.89,33.91,34.03,33.62,32.72,33.08,33.06,33.92,34.08,33.96,33.34,33.23,34.47,34.23,34.63,35.05,36.05,36.1,35.99,36.4,36.44,36.33,36.61,36.48,36.48,36.31,35.57,35.22,35.56,35.49,35.87,34.8,34.72,35.3,36.0,36.08,36.16,36.09,36.11,35.31,35.13,34.25,34.43,34.49,34.64,35.3,35.43,36.62,37.06,37.26,37.62,37.87,38.19,39.03,38.74,39.03,39.15,39.02,39.25,39.13,39.72,39.72,39.41,39.06,39.56,39.28,38.95,39.55,39.77,39.31,38.17,38.72,38.99,39.44,39.97,39.93,40.05,39.98,40.08,40.12,39.71,38.97,38.94,39.19,40.04,40.41,40.76,41.15,41.19,41.35,41.48,42.08,42.07,42.14,42.27,42.35,42.15,41.77,41.41,42.11,41.92,41.95,40.71,40.59,40.92,41.64,41.76,41.94,42.18,42.27,42.28,42.86,42.76,42.48,42.91,42.92,42.84,43.0,42.83,42.69,42.04,41.1,41.79,40.67,40.84,40.97,41.04,42.05,42.3,43.2,43.31,43.59,43.34,43.7,44.15,44.29,44.04,43.35,43.13,43.83,43.68,43.87,43.2,43.25,43.7,43.76,43.58,43.81,43.6,43.33,43.77,43.99,43.82,44.24,43.99,44.05,43.51,44.22,44.72,44.99,45.32,45.74,45.98,45.79,45.93,45.51,46.17,46.17,45.9,45.93,46.3,46.11,45.54,46.1,46.14,45.61,46.34,45.68,45.25,43.93,44.08,44.12,44.46,43.32,42.56,43.03,43.42,43.66,42.39,42.75,42.44,42.88,42.79,43.44,43.53,44.09,44.33,44.61,44.59,44.5,43.93,44.37,44.36,44.52,45.17,45.31,45.36,45.51,46.19,46.28,46.54,46.92,47.1,47.11,46.99,47.29,47.42,47.58,47.29,47.72,48.05,47.82,47.75,47.8,48.03,48.19,47.96,47.96,48.4,48.54,48.42,48.53,48.82,48.86,49.11,49.7,49.92,49.32,49.29,49.54,49.82,50.1,50.31,50.2,49.13,49.16,50.02,49.03,49.72,48.23,47.98,46.37,45.22,47.57,47.52,48.41,47.65,46.73,46.88,46.23,45.87,44.16,44.65,44.47,44.51,44.01,45.68,45.41,44.99,46.05,46.49,44.9,44.08,44.0,43.64,44.88,45.31,45.3,46.51,46.7,46.85,46.89,46.49,46.13,45.94,45.24,45.16,45.01,43.27,42.61,42.49,42.37,42.5,43.86,44.1,44.52,44.65,45.22,45.45,45.49,44.24,44.62,45.15,44.54,45.66,45.95,46.33,46.31,45.94,45.6,45.7,46.56,46.36,46.83,46.72,46.65,46.97,46.56,45.29,44.94,44.62,44.7,45.27,45.44,44.76,44.82,44.38,43.55,43.97,43.44,43.97,43.51,43.36,44.66,45.15,45.9,45.59,46.14,46.32,46.49,47.14,47.34,47.64,47.83,48.0,48.83,48.82,48.69,48.67,49.66,49.39,49.37,49.29,49.07,49.01,48.48,49.66,49.23,49.41,49.75,49.77,50.11,50.52,50.42,51.49,51.3,50.82,51.19,51.29,51.64,51.89,52.03,52.19,52.3,52.18,52.22,52.78,53.02,53.67,53.67,53.74,53.45,53.72,53.39,52.51,52.32,51.45,51.6,52.43,52.47,52.91,52.07,53.12,52.77,52.73,52.09,53.19,53.73,53.87,53.85,53.88,54.08,54.14,54.5,54.3,54.4,54.16,54.58,54.52,54.56,54.89,54.89,54.74,54.77,54.67,54.79,54.66,54.46,55.31,55.27,55.74,55.92,55.87,56.08,56.16,56.56,56.58,57.0,57.16,56.51,56.11,55.68,56.45,56.53,56.83,57.18,55.73,56.0,57.05,56.96,57.06,57.38,57.65,58.03,57.93)
        var macd = Indicators.macdLine(arr)
        println("result ${macd.contentToString()}")

    }




    @Test
    fun doubleArrayAssignmentPerformance() {
        val arr = DoubleArray(10000000)
        val start = System.nanoTime()
        for(i in arr.indices){
            arr[i]=i*0.1
        }
        val end = System.nanoTime()
        println("nano ${end-start}")

    }
}